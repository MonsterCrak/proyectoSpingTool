<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:insert="plantilla/UITemplate :: cabecera">
	<meta charset="ISO-8859-1">
	<title>Empleado</title>

</head>

<body>
	<!-- Insertando un fragmento para el menu -->
	<div th:insert="plantilla/UITemplate :: menu"></div>

	<!-- Contenedor principal INICIO-->
	<div class="container">


		<!-- Titulo-->
		<h3 class="text-center mt-4">LISTA DE EMPLEADOS</h3>


		<!-- Boton nuevo INICIO-->
		<button type="button" class="btn btn-primary mt-5" data-toggle="modal" data-target="#modalEmpleado"
			id="btn-nuevo">
			<i class="far fa-file"></i> Nuevo Empleado
		</button>
		<!-- Boton nuevo FIN-->

		<!-- tabla INICIO-->
		<div class=" mt-2">

			<table class="table table-striped table-bordered mt-5" id="tableEmpleados">
				<thead>
					<tr>
						<th>CÃ³digo</th>
						<th>Nombre</th>
						<th>Nacimiento</th>
						<th>Puesto</th>
						<th>Salario</th>
						<!--th>Usuario</th-->
						<!--th>Sucursal</th-->
						<th></th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="row:${empleados}">
						<td th:text="${row.codigo}"></td>
						<td th:text="${row.nombre}"></td>
						<td th:text="${row.fecha_nacimiento}"></td>
						<td th:text="${row.puesto}"></td>
						<td th:text="${row.salario}"></td>
						<!--td th:text="${row.usuario.login}"></td-->
						<!--td th:text="${row.sucursal.nombre}"></td-->
						<td><a class="btn btn-info btn-editar" data-toggle="modal" data-target="#modalEmpleado">
								<i class="far fa-edit"></a></td>
						<td><a class="btn btn-danger btn-eliminar"><i class="far fa-trash-alt"></i></a></td>
					</tr>
				</tbody>
			</table>
		</div>

		<!-- tabla FIN-->





		<!-- Modal INICIO-->
		<div class="modal fade" id="modalEmpleado" data-backdrop="static" data-keyboard="false" tabindex="-1"
			aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered modal-login modal-lg">
				<div class="modal-content">
					<div class="modal-header bg-blue-darker">
						<h4 class="modal-title text-white">Empleado</h4>
					</div>
					<div class="modal-body">
						<!-- Modificar form, action-->
						<form method="POST" id="idRegistra" action="/empleado/registrar">
							<div class="container">
								<div class="row">
									<!-- Input INICIO -->
									<div class="form-group has-feedback col-md-6">
										<label for="exampleInputEmail1"><b>Codigo</b></label><br>
										<i class="fas fa-file-signature form-control-feedback2"></i>
										<input type="text" class="form-control" id="idCodigo" placeholder="Ingresar DNI"
											name="codigo">
									</div>
									<!-- Input FIN -->

									<!-- Input INICIO -->
									<div class="form-group has-feedback col-md-6">
										<label for="exampleInputEmail1"><b>Nombre</b></label><br>
										<i class="fas fa-file-signature form-control-feedback2"></i>
										<input type="text" class="form-control" id="idNombre"
											placeholder="Ingresar nombre" name="nombre">
									</div>
									<!-- Input FIN -->

									<!-- Input INICIO -->
									<!-- name, id -->
									<div class="form-group has-feedback col-md-6">
										<label for="exampleInputEmail1"><b>Apellido</b></label><br>
										<i class="fas fa-file-signature form-control-feedback2"></i>
										<input type="text" class="form-control" id="idApellido"
											placeholder="Ingresar nombre" name="apellido">
									</div>
									<!-- Input FIN -->

									<!-- Input INICIO -->
									<div class="form-group has-feedback col-md-4">
										<label for="exampleInputEmail1" class="text-center"><b>Fecha
												de Nacimiento</b></label><br>
										<i class="fas fa-calendar-week form-control-feedback2"></i>
										<input type="text" style="background-color:#aed6f1" class="form-control"
											id="usr1" placeholder="YYYY-MM-DD" autocomplete="off" name="nacimiento">

									</div>
									<!-- Input FIN -->

									<!-- Select INICIO -->
									<div class="form-group has-feedback col-md-6">
										<label for="exampleInputEmail1"><b>Puesto</b></label><br>
										<i class="fas fa-prescription-bottle-alt form-control-feedback2"></i>
										<select class="form-control" id="idPuesto" name="puesto">
											<option value=" ">[Seleccione Puesto]</option>
											<option value="Administrador">Administrador</option>
											<option value="Caja">Cajero</option>
											<option value="Contabilidad">Contabilidad</option>

										</select>
									</div>
									<!-- Select FIN -->

									<!-- Input INICIO -->
									<div class="form-group has-feedback col-md-4">
										<label for="exampleInputEmail1"><b>Salario</b></label><br>
										<i class="fas fa-money-check-alt form-control-feedback2"></i>
										<input type="text" class="form-control" id="idSalario"
											placeholder="Ingresar salario" name="salario">
									</div>
									<!-- Input FIN -->

									<!-- Select INICIO -->
									<div class="form-group has-feedback col-md-6">
										<label for="exampleInputEmail1"><b>Sucursal</b></label><br>
										<i class="fas fa-prescription-bottle-alt form-control-feedback2"></i>
										<select class="form-control" id="idSucursal" name="sucursal">
											<option value=" ">[Seleccione Sucursal]</option>

											<!--Por lenguaje de expresion traemos los tipos a la vista
													      hacemos uso de utext para traer los datos al option, tambien con lenguaje de expresion
													      tambien se le da el value para obtener el codigo de la seleccion en el combobox-->
											<option th:each="fila:${sucursales}" th:utext="${fila.nombre}"
												th:value="${fila.codigo}" />
										</select>
									</div>
									<!-- Select FIN -->
								</div>
							</div>

							<!-- BOTONES INICIO -->
							<div class="col-md-12 text-center mt-4">
								<button type="submit" id="Guardar" class="btn btn-primary"><i class="fas fa-save"></i>
									Registrar</button>
								<button type="button" id="btn-cerrar" class="btn btn-danger" data-dismiss="modal"><i
										class="fas fa-undo-alt"></i> Cancelar</button>
							</div>

							<!-- BOTONES FIN -->
						</form>
					</div>
				</div>
			</div>
		</div>
		<!-- Modal FIN-->






	</div>
	<!-- Contenedor principal FIN-->




	<!-- Insertando un fragmento para el pie -->
	<div th:insert="plantilla/UITemplate :: pie"></div>



	<!--Alert consumible-->
	<script th:inline="javascript" th:if="${Mensaje!=null}">
		//Recuperar atributo mensaje
		let men =/*[[${Mensaje}]]*/
			toastr.success(men, toastr.options = {
				"timeOut": "2000",
				"positionClass ": " toast-top-right ",
			});

	</script>





	<script th:src="@{/js/Empleado.js}">



	</script>

	<script>
		$('#tableEmpleados').DataTable();
		$(function () {
			$('#usr1').datepicker({
				'format': 'yyyy-mm-dd',
				'autoclose': true
			});

		});
		$('#usr1').on('changeDate show', function (e) {
			$('#idRegistra').bootstrapValidator('revalidateField', $('#usr1'));
		});


	</script>

	<script type="text/javascript">
		$(document).ready(function () {

			$('#idRegistra').bootstrapValidator({
				feedbackIcons: {
					valid: 'glyphicon glyphicon-ok',
					invalid: 'glyphicon glyphicon-remove',
					validating: 'glyphicon glyphicon-refresh'
				},
				fields: {

					Nombres: {
						selector: '#idNombre',
						validators: {
							notEmpty: {
								message: 'Ingrese nombre'
							}
						}
					},
					Fecha: {
						selector: '#usr1',
						validators: {
							notEmpty: {
								message: 'Seleccione fecha '
							},
							date: {
								format: 'YYYY-MM-DD',
								message: 'The format is dd/mm/yyyy'
							},
						}
					}
				}
			})
		});    
	</script>






















</body>

</html>